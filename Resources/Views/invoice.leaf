<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>PDF Rendering</title>
    <link rel="stylesheet" href="/styles/style.css">
</head>

<body>
    <div class="invoice-box">
        <table cellpadding="0" cellspacing="0">
            <tr class="top">
                <td colspan="3">
                    <table>
                        <tr>
                            <td class="title">
                                <img src="/teams/#(team.id)/image" style="width:100%; max-width:500px;">
                            </td>

                            <td></td>

                            <td>
                                #if(type == "invoice"):
                                Facture #(number)
                                #else():
                                Devis #(number)
                                #endif
                                <br>
                                Date: <span id="date">#(createdAt)</span>
                                #if(!isEmpty(dueDate)):
                                <br>
                                Date d'échéance: #(dueDate)
                                #endif
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>

            <tr class="information">
                <td colspan="3">
                    <table>
                        <tr>
                            <td>
                                #(team.company)<br>
                                #(team.address)<br>
                                #(team.city)<br>
                                #(team.website)
                            </td>

                            <td></td>

                            <td>
                                #(customer.firstName) #(customer.lastName)<br>
                                #if(customer.company != null):
                                #(customer.company)<br>
                                #endif
                                #(address.line)<br>
                                #(address.zip), #(address.city)
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>

            <tr class="heading">
                <td>
                    Description
                </td>

                <td width="175px" align="right">
                    T.V.A.
                </td>

                <td width="125px" align="right">
                    Prix H.T.
                </td>
            </tr>

            #for(field in fields):
            <tr>
                <td>
                    #(field.name)
                </td>

                <td align="right">
                    #(field.vat) %
                </td>

                <td align="right">
                    #getFixed(field.price) €
                </td>
            </tr>
            #endfor

            <tr class="total">
                <td></td>

                <td align="right">
                    Total H.T.:
                </td>

                <td align="left">
                    #getFixed(no_vat) €
                </td>
            </tr>

            <tr>
                <td></td>

                <td align="right">
                    Total T.V.A.:
                </td>

                <td align="left">
                    #getFixed(vat) €
                </td>
            </tr>

            #if(promotion > 0):
            <tr>
                <td></td>

                <td align="right">
                    Remise commerciale:
                </td>

                <td align="left">
                    - #getFixed(promotion) €
                </td>
            </tr>
            #endif

            #if(deposit > 0):
            <tr>
                <td></td>

                <td align="right">
                    Acompte:
                </td>

                <td align="left">
                    - #getFixed(deposit) €
                </td>
            </tr>
            #endif

            <tr>
                <td></td>

                <td align="right">
                    <b>
                        #if(type == "quote"):
                        Total:
                        #else():
                        Reste à payer:
                        #endif
                    </b>
                </td>

                <td align="left">
                    <b>#getFixed(final) €</b>
                </td>
            </tr>
        </table>

        <br>

        #if(team.field):
        <ul>
            #for(entry in team.fields):
            <li>#(entry)</li>
            #endfor
        </ul>
        #endif
    </div>

    <script>
        let dateField = document.getElementById("date")
        let date = new Date(0)
        date.setUTCSeconds(dateField.innerText)
        dateField.innerText = date.toLocaleDateString()
    </script>
</body>

</html>